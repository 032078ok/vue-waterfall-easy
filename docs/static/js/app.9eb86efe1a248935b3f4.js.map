{"version":3,"sources":["webpack:///static/js/app.9eb86efe1a248935b3f4.js","webpack:///./src/App.vue","webpack:///App.vue","webpack:///vue-waterfall-easy.vue","webpack:///./src/components/vue-waterfall-easy.vue","webpack:///./src/App.vue?c376","webpack:///./src/components/vue-waterfall-easy.vue?617c","webpack:///./src/main.js"],"names":["webpackJsonp","module","exports","__webpack_require__","Component","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_components_vue_waterfall_easy_vue__","__WEBPACK_IMPORTED_MODULE_0_components_vue_waterfall_easy_vue___default","n","name","data","imgsArr","fetchImgsArr","components","vueWaterfallEasy","a","methods","initImgsArr","m","arr","i","push","src","link","info","fetchImgsData","this","concat","created","props","gap","type","Number","default","maxCols","Array","required","imgWidth","timeOut","msg","columnCount","NaN","isMobile","navigator","userAgent","match","beginIndex","colsHeightArr","imgBoxEls","isPreloading","isPreloadingC","imgsArrC","loadedCount","isFirstTIme","computed","colWidth","imgWidthC","window","innerWidth","waterfall","length","minHeight","Math","min","apply","minIndex","indexOf","width","offsetWidth","style","position","left","top","$set","offsetHeight","loadFn","e","oImg","_this","round","height","$nextTick","initImgBoxEls","$emit","preload","_this2","forEach","v","Image","addEventListener","initColsHeightArr","document","getElementsByClassName","initColumnCount","winWidth","parseInt","mounted","_this3","$on","old","lastImgHeight","body","scrollTop","innerHeight","scrollHeight","watch","newV","oldV","_this4","setTimeout","render","_vm","_h","$createElement","_c","_self","attrs","id","on","scrollLoadImg","scopedSlots","_u","key","fn","staticClass","_v","_s","index","staticRenderFns","marginLeft","_l","padding","href","_t","class","first-loading","_e","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_0_vue___default","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_1__App___default","el","template","App"],"mappings":"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","file":"static/js/app.9eb86efe1a248935b3f4.js","sourcesContent":["webpackJsonp([0,2],[\n/* 0 */,\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(5)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(3),\n  /* template */\n  __webpack_require__(8),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 2 */,\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_components_vue_waterfall_easy_vue__ = __webpack_require__(7);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_components_vue_waterfall_easy_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_components_vue_waterfall_easy_vue__);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = {\n  name: 'app',\n  data: function data() {\n    return {\n      imgsArr: [],\n      fetchImgsArr: []\n    };\n  },\n\n  components: {\n    vueWaterfallEasy: __WEBPACK_IMPORTED_MODULE_0_components_vue_waterfall_easy_vue___default.a\n  },\n  methods: {\n    initImgsArr: function initImgsArr(n, m) {\n      var arr = [];\n      for (var i = n; i < m; i++) {\n        arr.push({ src: './static/img/' + (i + 1) + '.jpg', link: 'https://www.baidu.com', info: '一些图片描述文字' });\n      }\n      return arr;\n    },\n    fetchImgsData: function fetchImgsData() {\n      this.imgsArr = this.imgsArr.concat(this.fetchImgsArr);\n    }\n  },\n  created: function created() {\n    this.imgsArr = this.initImgsArr(0, 10);\n    this.fetchImgsArr = this.initImgsArr(10, 20);\n  }\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = {\n  name: 'vue-waterfall-easy',\n  props: {\n    gap: {\n      type: Number,\n      default: 20\n    },\n    maxCols: {\n      type: Number,\n      default: 5\n    },\n    imgsArr: {\n      type: Array,\n      required: true\n    },\n    imgWidth: {\n      type: Number,\n      default: 240\n    },\n    timeOut: {\n      type: Number,\n      default: 500\n    }\n  },\n  data: function data() {\n    return {\n      msg: 'this is from vue-waterfall-easy.vue',\n      columnCount: NaN,\n      isMobile: navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i),\n      beginIndex: NaN,\n\n      colsHeightArr: [],\n      imgBoxEls: null,\n      isPreloading: true,\n      isPreloadingC: true,\n      imgsArrC: [],\n      loadedCount: 0,\n      isFirstTIme: true };\n  },\n\n  computed: {\n    colWidth: function colWidth() {\n      return this.imgWidth + this.gap;\n    },\n    imgWidthC: function imgWidthC() {\n      return this.isMobile ? window.innerWidth / 2 - this.gap : this.imgWidth;\n    }\n  },\n  methods: {\n    waterfall: function waterfall() {\n      for (var i = this.beginIndex; i < this.imgsArr.length; i++) {\n        var minHeight = Math.min.apply(null, this.colsHeightArr);\n        var minIndex = this.colsHeightArr.indexOf(minHeight);\n        var width = this.imgBoxEls[0].offsetWidth;\n        this.imgBoxEls[i].style.position = 'absolute';\n        this.imgBoxEls[i].style.left = minIndex * width + 'px';\n        this.imgBoxEls[i].style.top = minHeight + 'px';\n\n        this.$set(this.colsHeightArr, minIndex, minHeight + this.imgBoxEls[i].offsetHeight);\n      }\n      this.beginIndex = this.imgsArr.length;\n    },\n    loadFn: function loadFn(e, oImg, i) {\n      var _this = this;\n\n      this.loadedCount++;\n      if (e.type === 'load') {\n        this.$set(this.imgsArr[i], 'height', Math.round(this.imgWidthC / (oImg.width / oImg.height)));\n      }\n      if (this.loadedCount === this.imgsArr.length) {\n        this.imgsArrC = this.imgsArr.concat([]);\n\n        this.isPreloading = false;\n        this.isFirstTIme = false;\n\n        this.$nextTick(function () {\n          _this.initImgBoxEls();\n          _this.$emit('preloaded');\n        });\n      }\n    },\n    preload: function preload() {\n      var _this2 = this;\n\n      this.imgsArr.forEach(function (v, i) {\n        if (i < _this2.loadedCount) return;\n\n        var oImg = new Image();\n        oImg.addEventListener('load', function (e) {\n          _this2.loadFn(e, oImg, i);\n        });\n        oImg.src = v.src;\n      });\n    },\n    initColsHeightArr: function initColsHeightArr() {\n      this.colsHeightArr = [];\n      for (var i = 0; i < this.columnCount; i++) {\n        this.imgBoxEls[i].style.position = 'static';\n        var height = this.imgBoxEls[i].offsetHeight;\n        this.colsHeightArr.push(height);\n      }\n    },\n    initImgBoxEls: function initImgBoxEls() {\n      this.imgBoxEls = document.getElementsByClassName('img-box');\n    },\n    initColumnCount: function initColumnCount() {\n\n      var winWidth = window.innerWidth;\n      var columnCount = parseInt(winWidth / this.colWidth);\n      columnCount = columnCount === 0 ? 1 : columnCount;\n      this.columnCount = this.isMobile ? 2 : columnCount > this.maxCols ? this.maxCols : columnCount;\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    this.initColumnCount();\n    this.beginIndex = this.columnCount;\n    this.preload();\n\n    this.$on('preloaded', function () {\n      if (_this3.colsHeightArr.length === 0) _this3.initColsHeightArr();\n      _this3.waterfall();\n    });\n\n    window.addEventListener('resize', function () {\n      var old = _this3.columnCount;\n      _this3.initColumnCount();\n      if (old === _this3.columnCount) return;\n      _this3.beginIndex = _this3.columnCount;\n\n      _this3.initColsHeightArr();\n      _this3.waterfall();\n    });\n\n    window.addEventListener('scroll', function () {\n      if (_this3.isPreloading) return;\n      var lastImgHeight = _this3.imgsArr[_this3.imgsArr.length - 1].height;\n      if (document.body.scrollTop + window.innerHeight > document.body.scrollHeight - lastImgHeight) {\n        _this3.$emit('scrollLoadImg');\n      }\n    });\n  },\n\n  watch: {\n    imgsArr: function imgsArr(newV, oldV) {\n      if (newV.length === oldV.length) return;\n      this.isPreloading = true;\n      this.preload();\n    },\n    isPreloading: function isPreloading(v) {\n      var _this4 = this;\n\n      if (v) {\n        setTimeout(function () {\n          if (!_this4.isPreloading) return;\n          _this4.isPreloadingC = true;\n        }, this.timeOut);\n      } else {\n        this.isPreloadingC = false;\n      }\n    }\n  }\n};\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(6)\n\nvar Component = __webpack_require__(0)(\n  /* script */\n  __webpack_require__(4),\n  /* template */\n  __webpack_require__(9),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('vue-waterfall-easy', {\n    attrs: {\n      \"imgsArr\": _vm.imgsArr\n    },\n    on: {\n      \"scrollLoadImg\": _vm.fetchImgsData\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(props) {\n        return [_c('p', {\n          staticClass: \"some-info\"\n        }, [_vm._v(\"第\" + _vm._s(props.index + 1) + \"张图片\")]), _c('p', {\n          staticClass: \"some-info\"\n        }, [_vm._v(_vm._s(props.value.info))])]\n      }\n    }])\n  })], 1)\n},staticRenderFns: []}\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"vue-waterfall-easy\",\n    style: (_vm.isMobile ? '' : {\n      width: _vm.colWidth * _vm.columnCount + 'px',\n      left: '50%',\n      marginLeft: -1 * _vm.colWidth * _vm.columnCount / 2 + 'px'\n    })\n  }, [_vm._l((_vm.imgsArrC), function(v, i) {\n    return _c('a', {\n      staticClass: \"img-box\",\n      style: ({\n        padding: _vm.gap / 2 + 'px',\n        width: _vm.isMobile ? '' : _vm.colWidth + 'px'\n      }),\n      attrs: {\n        \"href\": v.link\n      }\n    }, [_c('div', {\n      staticClass: \"img-inner-box\"\n    }, [_c('div', {\n      staticClass: \"img-wraper\",\n      style: ({\n        width: _vm.imgWidthC + 'px',\n        height: v.height ? v.height + 'px' : ''\n      })\n    }, [_c('img', {\n      attrs: {\n        \"src\": v.src\n      }\n    })]), _c('div', {\n      staticClass: \"img-info\"\n    }, [_vm._t(\"default\", null, {\n      index: i,\n      value: v\n    })], 2)])])\n  }), (_vm.isPreloadingC) ? _c('div', {\n    staticClass: \"loading\",\n    class: {\n      'first-loading': _vm.isFirstTIme\n    }\n  }, [_c('div', {\n    staticClass: \"double-bounce1\"\n  }), _c('div', {\n    staticClass: \"double-bounce2\"\n  })]) : _vm._e()], 2)\n},staticRenderFns: []}\n\n/***/ }),\n/* 10 */,\n/* 11 */,\n/* 12 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__App__);\n\n\n\n\nnew __WEBPACK_IMPORTED_MODULE_0_vue___default.a({\n  el: '#app',\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__App___default.a }\n});\n\n/***/ })\n],[12]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.9eb86efe1a248935b3f4.js","\n/* styles */\nrequire(\"!!./../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?minimize&sourceMap!./../node_modules/vue-loader/lib/style-rewriter?{\\\"id\\\":\\\"data-v-000761d9\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!sass-loader?sourceMap!./../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n\nvar Component = require(\"!./../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!./../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"),\n  /* template */\n  require(\"!!./../node_modules/vue-loader/lib/template-compiler?{\\\"id\\\":\\\"data-v-000761d9\\\"}!./../node_modules/vue-loader/lib/template-loader?raw&engine=pug!./../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = 1\n// module chunks = 0","<template lang=\"pug\">\n #app\n  vue-waterfall-easy(:imgsArr=\"imgsArr\",@scrollLoadImg=\"fetchImgsData\")\n    template( scope=\"props\")\n      p.some-info 第{{props.index+1}}张图片\n      p.some-info {{props.value.info}}\n  </template>\n</template>\n\n<script>\nimport vueWaterfallEasy from 'components/vue-waterfall-easy.vue'\n\nexport default {\n  name: 'app',\n  data() {\n    return {\n      imgsArr: [],\n      fetchImgsArr: []\n    }\n  },\n  components: {\n    vueWaterfallEasy\n  },\n  methods: {\n    // 假数据\n    initImgsArr(n, m) { //num 图片数量\n      var arr = []\n      for (var i = n; i < m; i++) {\n        arr.push({ src: `./static/img/${i + 1}.jpg`, link:'https://www.baidu.com',info: '一些图片描述文字' })\n      }\n      return arr\n    },\n\n    fetchImgsData() {\n      this.imgsArr = this.imgsArr.concat(this.fetchImgsArr)\n    }\n  },\n  created() {\n    this.imgsArr = this.initImgsArr(0, 10)\n    this.fetchImgsArr = this.initImgsArr(10, 20) // 模拟每次请求的新的图片的数据数据\n  },\n\n}\n\n</script>\n\n<style lang=\"scss\">\n* {\n  margin: 0;\n  padding: 0;\n}\n\n#app {\n  font-family: microsoft yahei;\n  .some-info {\n    line-height: 1.6;\n    text-align: center;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// App.vue?e7b8e03c","<!-- —————————————↓SCSS———————分界线————————————————————————— -->\n<style lang=\"scss\">\n.vue-waterfall-easy {\n  position: absolute;\n  width: 100%; // 移动端生效\n  .img-box {\n    display: inline-block;\n    width: 50%; // 移动端生效\n    box-sizing: border-box;\n    float: left; // 首行排版\n    transition: left 1s, top 1s;\n\n    .img-inner-box {\n      box-shadow: 0 1px 3px rgba(0, 0, 0, .3);\n      .img-wraper {\n        width: 100%;\n        background: yellow;\n      }\n      img {\n        width: 100%;\n        vertical-align: bottom;\n      }\n      .img-info {\n        background: #fff;\n        padding: .6em;\n      }\n    }\n  }\n  .loading {\n    text-align: center;\n    width: 100%;\n    position: fixed;\n    bottom: 10px;\n    left: 50%;\n    margin-left: -15px;\n    width: 30px;\n    height: 30px;\n  }\n  .loading.first-loading {\n    //  首次预加载白屏，让加载动画处于中间\n    top: 50%;\n    margin-top: -15px;\n  }\n  .double-bounce1,\n  .double-bounce2 {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: #67CF22;\n    opacity: 0.6;\n    position: absolute;\n    top: 0;\n    left: 0;\n\n    animation: bounce 2.0s infinite ease-in-out;\n  }\n\n  .double-bounce2 {\n    animation-delay: -1.0s;\n  }\n\n\n\n  @keyframes bounce {\n    0%,\n    100% {\n      transform: scale(0.0);\n    }\n    50% {\n      transform: scale(1.0);\n    }\n  }\n}\n</style>\n\n<!-- —————————————↓HTML————————分界线———————————————————————— -->\n<template lang=\"pug\">\n.vue-waterfall-easy(\n  :style=\"isMobile? '':{width:colWidth*columnCount+'px',left:'50%',marginLeft: -1*colWidth*columnCount/2 +'px'}\"\n)\n  a.img-box(\n    v-for=\"(v,i) in imgsArrC\",\n    :href=\"v.link\",\n    :style=\"{padding:gap/2+'px',width: isMobile ? '' : colWidth+'px'}\"\n  )\n    .img-inner-box\n      div.img-wraper(:style=\"{width:imgWidthC+'px',height:v.height?v.height+'px':''}\")\n        img(:src=\"v.src\")\n      .img-info\n        slot(:index=\"i\",:value=\"v\")\n\n  .loading(v-if=\"isPreloadingC\",:class=\"{'first-loading':isFirstTIme}\")\n    div.double-bounce1\n    div.double-bounce2\n\n\n</template>\n\n<!-- ——————————————↓JS—————————分界线———————————————————————— -->\n<script>\n//import XXX from './components/XXX'\n\nexport default {\n  name: 'vue-waterfall-easy',\n  props: {\n    gap: {\n      type: Number,\n      default: 20\n    },\n    maxCols: {\n      type: Number,\n      default: 5\n    },\n    imgsArr: {\n      type: Array,\n      required: true\n    },\n    imgWidth: {\n      type: Number,\n      default: 240\n    },\n    timeOut: { // 预加载事件小于500毫秒就不显示加载动画，增加用户体验\n      type: Number,\n      default: 500\n    }\n  },\n  data() {\n    return {\n      msg: 'this is from vue-waterfall-easy.vue',\n      columnCount: NaN, // 列数，根据窗口大小初始化\n      isMobile: navigator.userAgent.match(/(iPhone|iPod|Android|ios)/i), // 初始化移动端\n      beginIndex: NaN, // 第二列首张图片的index，从这一张开始重新计算图片位置\n\n      colsHeightArr: [], // 每一列的图片总和高度为元素组成的数组\n      imgBoxEls: null, // 所有的.img-box元素\n      isPreloading: true, // 预加载状态中（1.以等待图片替换 2.图片全部预加载完显示）\n      isPreloadingC: true,\n      imgsArrC: [], // 预加载完之后再才开始\n      loadedCount: 0, // 已经加载图片数量\n      isFirstTIme: true, // 首次加载\n    }\n  },\n  computed: {\n    colWidth() { // 每一列的宽度\n      return this.imgWidth + this.gap\n    },\n    imgWidthC() { // 对于移动端重新计算图片宽度\n      return this.isMobile ? window.innerWidth / 2 - this.gap : this.imgWidth\n    }\n  },\n  methods: {\n    waterfall() { // 执行瀑布布局\n      for (var i = this.beginIndex; i < this.imgsArr.length; i++) {\n        var minHeight = Math.min.apply(null, this.colsHeightArr) // 最低高低\n        var minIndex = this.colsHeightArr.indexOf(minHeight) // 最低高度的索引\n        var width = this.imgBoxEls[0].offsetWidth // 图片的宽度获取\n        // 设置元素定位的位置\n        this.imgBoxEls[i].style.position = 'absolute'\n        this.imgBoxEls[i].style.left = minIndex * width + 'px'\n        this.imgBoxEls[i].style.top = minHeight + 'px'\n\n        // 更新colsHeightArr\n        this.$set(this.colsHeightArr, minIndex, minHeight + this.imgBoxEls[i].offsetHeight)\n      }\n      this.beginIndex = this.imgsArr.length\n    },\n\n    loadFn(e, oImg, i) { // 每张图片预加载完成执行函数\n      this.loadedCount++\n      if (e.type === 'load') { // 使用图片原始宽度计算图片的高度\n        this.$set(this.imgsArr[i], 'height', Math.round(this.imgWidthC / (oImg.width / oImg.height)))\n      }\n      if (this.loadedCount === this.imgsArr.length) {\n        this.imgsArrC = this.imgsArr.concat([])\n\n\n        this.isPreloading = false\n        this.isFirstTIme = false\n\n        // 预加载完毕\n        this.$nextTick(() => {\n          this.initImgBoxEls()\n          this.$emit('preloaded')\n\n        })\n      }\n    },\n    preload() {\n      this.imgsArr.forEach((v, i) => {\n        if (i < this.loadedCount) return\n\n        var oImg = new Image()\n        oImg.addEventListener('load', (e) => {\n          this.loadFn(e, oImg, i)\n        })\n        oImg.src = v.src\n      })\n    },\n\n\n    // -----------------初始化化------------------------\n\n    initColsHeightArr() { // 第一行元素的高度组成的数组-初始化\n      this.colsHeightArr = [] // 列数发生变化重新初始化\n      for (var i = 0; i < this.columnCount; i++) {\n        this.imgBoxEls[i].style.position = 'static' // 重置下position\n        var height = this.imgBoxEls[i].offsetHeight\n        this.colsHeightArr.push(height)\n      }\n    },\n    initImgBoxEls() { // 初始化所有装图片的元素集合,注意高度获取需要在图片加载完成之后，所以在window.onload 事件中初始化\n      this.imgBoxEls = document.getElementsByClassName('img-box')\n    },\n\n    initColumnCount() { // 列数初始化\n\n      var winWidth = window.innerWidth\n      var columnCount = parseInt(winWidth / this.colWidth)\n      columnCount = columnCount === 0 ? 1 : columnCount\n      this.columnCount = this.isMobile\n        ? 2\n        : (columnCount > this.maxCols ? this.maxCols : columnCount)\n\n    },\n  },\n  mounted() {\n    // ==1== 根据窗口大小初始化列数\n    this.initColumnCount()\n    this.beginIndex = this.columnCount // 开始排列的元素索引\n\n    // ==2== 根据预加载完成的图片的长宽比，计算图片的高度\n    this.preload()\n\n    this.$on('preloaded', () => {\n      if (this.colsHeightArr.length === 0) this.initColsHeightArr() // 第一次初始化\n      this.waterfall()\n    })\n\n    window.addEventListener('resize', () => {\n      var old = this.columnCount\n      this.initColumnCount()\n      if (old === this.columnCount) return // 列数不变直接退出\n      this.beginIndex = this.columnCount // 开始排列的元素索引\n\n      this.initColsHeightArr()\n      this.waterfall()\n\n\n    })\n\n    window.addEventListener('scroll', () => {\n      if (this.isPreloading) return\n      const lastImgHeight = this.imgsArr[this.imgsArr.length - 1].height\n      if (document.body.scrollTop + window.innerHeight > document.body.scrollHeight - lastImgHeight) {\n        this.$emit('scrollLoadImg')\n\n      }\n    })\n\n  },\n  watch: {\n    imgsArr(newV, oldV) {\n      if (newV.length === oldV.length) return\n      this.isPreloading = true // 预加载新的图片资源\n      this.preload()\n\n      // setTimeout(()=>{ // 模拟图片预加载时间为1s\n\n      // this.preload()\n      // },1000)\n\n    },\n    isPreloading(v) {\n      if (v) {\n        setTimeout(() => {\n          if (!this.isPreloading) return // 500毫秒内预加载完图片则不显示加载动画\n          this.isPreloadingC = true\n        }, this.timeOut)\n      } else {\n        this.isPreloadingC = false\n      }\n\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// vue-waterfall-easy.vue?0514fbbc","\n/* styles */\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?minimize&sourceMap!./../../node_modules/vue-loader/lib/style-rewriter?{\\\"id\\\":\\\"data-v-4669e716\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":true}!sass-loader?sourceMap!./../../node_modules/vue-loader/lib/selector?type=styles&index=0!./vue-waterfall-easy.vue\")\n\nvar Component = require(\"!./../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!./../../node_modules/vue-loader/lib/selector?type=script&index=0!./vue-waterfall-easy.vue\"),\n  /* template */\n  require(\"!!./../../node_modules/vue-loader/lib/template-compiler?{\\\"id\\\":\\\"data-v-4669e716\\\"}!./../../node_modules/vue-loader/lib/template-loader?raw&engine=pug!./../../node_modules/vue-loader/lib/selector?type=template&index=0!./vue-waterfall-easy.vue\"),\n  /* scopeId */\n  null,\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/vue-waterfall-easy.vue\n// module id = 7\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    attrs: {\n      \"id\": \"app\"\n    }\n  }, [_c('vue-waterfall-easy', {\n    attrs: {\n      \"imgsArr\": _vm.imgsArr\n    },\n    on: {\n      \"scrollLoadImg\": _vm.fetchImgsData\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function(props) {\n        return [_c('p', {\n          staticClass: \"some-info\"\n        }, [_vm._v(\"第\" + _vm._s(props.index + 1) + \"张图片\")]), _c('p', {\n          staticClass: \"some-info\"\n        }, [_vm._v(_vm._s(props.value.info))])]\n      }\n    }])\n  })], 1)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?{\"id\":\"data-v-000761d9\"}!./~/vue-loader/lib/template-loader.js?raw&engine=pug!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = 8\n// module chunks = 0","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"vue-waterfall-easy\",\n    style: (_vm.isMobile ? '' : {\n      width: _vm.colWidth * _vm.columnCount + 'px',\n      left: '50%',\n      marginLeft: -1 * _vm.colWidth * _vm.columnCount / 2 + 'px'\n    })\n  }, [_vm._l((_vm.imgsArrC), function(v, i) {\n    return _c('a', {\n      staticClass: \"img-box\",\n      style: ({\n        padding: _vm.gap / 2 + 'px',\n        width: _vm.isMobile ? '' : _vm.colWidth + 'px'\n      }),\n      attrs: {\n        \"href\": v.link\n      }\n    }, [_c('div', {\n      staticClass: \"img-inner-box\"\n    }, [_c('div', {\n      staticClass: \"img-wraper\",\n      style: ({\n        width: _vm.imgWidthC + 'px',\n        height: v.height ? v.height + 'px' : ''\n      })\n    }, [_c('img', {\n      attrs: {\n        \"src\": v.src\n      }\n    })]), _c('div', {\n      staticClass: \"img-info\"\n    }, [_vm._t(\"default\", null, {\n      index: i,\n      value: v\n    })], 2)])])\n  }), (_vm.isPreloadingC) ? _c('div', {\n    staticClass: \"loading\",\n    class: {\n      'first-loading': _vm.isFirstTIme\n    }\n  }, [_c('div', {\n    staticClass: \"double-bounce1\"\n  }), _c('div', {\n    staticClass: \"double-bounce2\"\n  })]) : _vm._e()], 2)\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler.js?{\"id\":\"data-v-4669e716\"}!./~/vue-loader/lib/template-loader.js?raw&engine=pug!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/vue-waterfall-easy.vue\n// module id = 9\n// module chunks = 0","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}